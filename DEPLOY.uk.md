# –ü–æ—Å—ñ–±–Ω–∏–∫ –∑ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —É –ü—Ä–æ–¥–∞–∫—à–Ω

–¶–µ–π –ø–æ—Å—ñ–±–Ω–∏–∫ –æ—Ö–æ–ø–ª—é—î —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É —É –ø—Ä–æ–¥–∞–∫—à–Ω –∑ Docker, Docker Compose —Ç–∞ –±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Nginx.

## üìã –ó–º—ñ—Å—Ç

- [–û–≥–ª—è–¥ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏](#–æ–≥–ª—è–¥-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏)
- [–ü–µ—Ä–µ–¥—É–º–æ–≤–∏](#–ø–µ—Ä–µ–¥—É–º–æ–≤–∏)
- [–®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç](#—à–≤–∏–¥–∫–∏–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ –§–∞–π–ª–∏](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ-—Ñ–∞–π–ª–∏)
- [–ö–æ–º–∞–Ω–¥–∏ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è](#–∫–æ–º–∞–Ω–¥–∏-—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è)
- [–ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è](#–º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è)
- [–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —ñ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤'—è](#–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥-—ñ-–ø–µ—Ä–µ–≤—ñ—Ä–∫–∏-–∑–¥–æ—Ä–æ–≤—è)
- [–£—Å—É–Ω–µ–Ω–Ω—è –ù–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π](#—É—Å—É–Ω–µ–Ω–Ω—è-–Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)
- [–ú—ñ—Ä–∫—É–≤–∞–Ω–Ω—è –ë–µ–∑–ø–µ–∫–∏](#–º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è-–±–µ–∑–ø–µ–∫–∏)

## üèóÔ∏è –û–≥–ª—è–¥ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

–ü—Ä–æ–¥–∞–∫—à–Ω —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑:

- **4x Node.js –Ü–Ω—Å—Ç–∞–Ω—Å–∏ –î–æ–¥–∞—Ç–∫—É** - –°–µ—Ä–≤–µ—Ä–∏ –¥–æ–¥–∞—Ç–∫—ñ–≤ –∑ –±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **1x Nginx** - –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –ø—Ä–æ–∫—Å—ñ —Ç–∞ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **1x PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **1x MongoDB** - –î–æ–∫—É–º–µ–Ω—Ç–Ω–µ —Å—Ö–æ–≤–∏—â–µ
- **1x Redis** - –ö–µ—à —Ç–∞ —Å—Ö–æ–≤–∏—â–µ —Å–µ—Å—ñ–π

### –ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

Nginx —Ä–æ–∑–ø–æ–¥—ñ–ª—è—î —Ç—Ä–∞—Ñ—ñ–∫ –º—ñ–∂ 4 —ñ–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ –¥–æ–¥–∞—Ç–∫—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–ª–≥–æ—Ä–∏—Ç–º—É **–Ω–∞–π–º–µ–Ω—à–µ –∑'—î–¥–Ω–∞–Ω—å**:

- –¢—Ä–∞—Ñ—ñ–∫ –Ω–∞–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∑ –Ω–∞–π–º–µ–Ω—à–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑'—î–¥–Ω–∞–Ω—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è, —è–∫—â–æ —ñ–Ω—Å—Ç–∞–Ω—Å —Å—Ç–∞—î –Ω–µ–∑–¥–æ—Ä–æ–≤–∏–º
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤'—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ `/api/health`

### –ú–µ—Ä–µ–∂–µ–≤–∞ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ –ø–æ—Ä—Ç–∏ 80/443
                   ‚ñº
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ    Nginx     ‚îÇ (SSL/TLS —Ç–µ—Ä–º—ñ–Ω–∞—Ü—ñ—è)
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ –ë–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ (least_conn)
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº          ‚ñº          ‚ñº          ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇApp 1‚îÇ    ‚îÇApp 2‚îÇ    ‚îÇApp 3‚îÇ    ‚îÇApp 4‚îÇ
    ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò
       ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº             ‚ñº             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇPostgres‚îÇ   ‚îÇMongoDB ‚îÇ   ‚îÇ Redis ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚úÖ –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Docker Engine 20.10+
- Docker Compose 2.0+
- SSL/TLS —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –≤ `nginx/secrets/certs/`
- –§–∞–π–ª `.htpasswd` –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- –§–∞–π–ª `.env` –∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### –ó–º—ñ–Ω–Ω—ñ –°–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

```env
# PostgreSQL
POSTGRES_DB=your_database_name
POSTGRES_USER=your_database_user
POSTGRES_PASSWORD=your_secure_password

# –û–ø—Ü—ñ–π–Ω–æ: –ü–æ—Ä—Ç PostgreSQL –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
DEV_POSTGRES_PORT=5432:5432

# –û–ø—Ü—ñ–π–Ω–æ: –ü–æ—Ä—Ç MongoDB –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏
DEV_MONGO_PORT=27017:27017
```

### SSL –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏

–†–æ–∑–º—ñ—Å—Ç—ñ—Ç—å –≤–∞—à—ñ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –≤:

- `nginx/secrets/certs/server.crt`
- `nginx/secrets/certs/server.key`

–î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏/—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏ –º–æ–∂–µ—Ç–µ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Å–∞–º–æ–ø—ñ–¥–ø–∏—Å–∞–Ω—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏:

```bash
mkdir -p nginx/secrets/certs
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout nginx/secrets/certs/server.key \
  -out nginx/secrets/certs/server.crt
```

### –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

–ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.htpasswd`:

```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ htpasswd (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ)
htpasswd -c nginx/secrets/.htpasswd admin

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –æ–Ω–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä: https://hostingcanada.org/htpasswd-generator/
```

## üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

–†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ç–µ–∫ –∑ 4 —Ä–µ–ø–ª—ñ–∫–∞–º–∏ –¥–æ–¥–∞—Ç–∫—É:

```bash
make prod-deploy
```

–¶—è –∫–æ–º–∞–Ω–¥–∞:

1. –ü–æ–±—É–¥—É—î –ø—Ä–æ–¥–∞–∫—à–Ω Docker –æ–±—Ä–∞–∑
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ (app√ó4, nginx, postgres, mongo, redis)
3. –ü–æ—á–µ–∫–∞—î, –ø–æ–∫–∏ —Å–µ—Ä–≤—ñ—Å–∏ —Å—Ç–∞–Ω—É—Ç—å –∑–¥–æ—Ä–æ–≤–∏–º–∏
4. –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤'—è

–î–æ—Å—Ç—É–ø –¥–æ –¥–æ–¥–∞—Ç–∫—É:

- **HTTPS**: https://localhost
- **HTTP**: http://localhost (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ HTTPS)
- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**: https://localhost/api/reference/ (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è)

## üìÅ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ –§–∞–π–ª–∏

### `Dockerfile.prod`

–ü—Ä–æ–¥–∞–∫—à–Ω-–æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π Docker –æ–±—Ä–∞–∑ –∑:

- **–ë–∞–≥–∞—Ç–æ–µ—Ç–∞–ø–Ω–∞ –∑–±—ñ—Ä–∫–∞** –¥–ª—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É –æ–±—Ä–∞–∑—É
- **–¢—ñ–ª—å–∫–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** (–±–µ–∑ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —Ä–æ–∑—Ä–æ–±–∫–∏)
- **–ù–µ–ø—Ä–∏–≤—ñ–ª–µ–π–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á** –¥–ª—è –±–µ–∑–ø–µ–∫–∏
- **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤'—è** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é curl
- **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –ø–æ—Ä—Ç—ñ–≤ –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è**

–ö–ª—é—á–æ–≤—ñ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:

- –ë–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑: `node:22.21.0-slim`
- –†–æ–∑–º—ñ—Ä —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑—É: ~300MB (–ø—Ä–æ—Ç–∏ ~800MB –æ–±—Ä–∞–∑—É —Ä–æ–∑—Ä–æ–±–∫–∏)
- –ë–µ–∑ –≥–∞—Ä—è—á–æ–≥–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ —Ç–∞ –±–µ–∑–ø–µ–∫–∏

### `docker-compose.prod.yml`

–ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è compose –∑:

#### –°–µ—Ä–≤—ñ—Å –î–æ–¥–∞—Ç–∫—É

- **–†–µ–ø–ª—ñ–∫–∏**: 4 —ñ–Ω—Å—Ç–∞–Ω—Å–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **–û–±–º–µ–∂–µ–Ω–Ω—è –†–µ—Å—É—Ä—Å—ñ–≤**:
  - CPU: 1.5 (–ª—ñ–º—ñ—Ç) / 0.5 (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
  - –ü–∞–º'—è—Ç—å: 768MB (–ª—ñ–º—ñ—Ç) / 256MB (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
- **–ü–æ–ª—ñ—Ç–∏–∫–∞ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫—É**: –ü—Ä–∏ –∑–±–æ—ó (–º–∞–∫—Å. 3 —Å–ø—Ä–æ–±–∏)
- **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤'—è**: –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/health`
- **–ú–µ—Ä–µ–∂—ñ**: –ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ web_net —Ç–∞ app_subnet
- **–ü—É–ª–∏ –ó'—î–¥–Ω–∞–Ω—å –∑ –ë–∞–∑–∞–º–∏ –î–∞–Ω–∏—Ö**:
  - PostgreSQL: 20 –º–∞–∫—Å. –∑'—î–¥–Ω–∞–Ω—å –Ω–∞ —ñ–Ω—Å—Ç–∞–Ω—Å
  - MongoDB: 20 –º–∞–∫—Å. –∑'—î–¥–Ω–∞–Ω—å –Ω–∞ —ñ–Ω—Å—Ç–∞–Ω—Å

#### –°–µ—Ä–≤—ñ—Å Nginx

- **–ü–æ—Ä—Ç–∏**: 80 (HTTP), 443 (HTTPS)
- **–û–±–º–µ–∂–µ–Ω–Ω—è –†–µ—Å—É—Ä—Å—ñ–≤**:
  - CPU: 1.0 (–ª—ñ–º—ñ—Ç) / 0.25 (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
  - –ü–∞–º'—è—Ç—å: 256MB (–ª—ñ–º—ñ—Ç) / 64MB (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
- **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤'—è**: HTTP –µ–Ω–¥–ø–æ—ñ–Ω—Ç –∑–¥–æ—Ä–æ–≤'—è (–±–µ–∑ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è)
- **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**:
  - Keepalive –∑'—î–¥–Ω–∞–Ω–Ω—è: 64 —Ä–æ–∑–º—ñ—Ä –ø—É–ª—É
  - Keepalive –∑–∞–ø–∏—Ç–∏: 1000 –Ω–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è
  - –ü—Ä–æ–∫—Å—ñ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è: 16x8KB –±—É—Ñ–µ—Ä—ñ–≤

#### –°–µ—Ä–≤—ñ—Å PostgreSQL

- **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**:
  - –ú–∞–∫—Å. –∑'—î–¥–Ω–∞–Ω–Ω—è: 200
  - –°–ø—ñ–ª—å–Ω—ñ –±—É—Ñ–µ—Ä–∏: 384MB (~25% –ø–∞–º'—è—Ç—ñ)
  - –ï—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É: 1152MB (~75% –ø–∞–º'—è—Ç—ñ)
  - –†–æ–±–æ—á–∞ –ø–∞–º'—è—Ç—å: 1966kB
  - –ü–∞–º'—è—Ç—å –¥–ª—è –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è: 96MB
- **–û–±–º–µ–∂–µ–Ω–Ω—è –†–µ—Å—É—Ä—Å—ñ–≤**:
  - CPU: 2.0 (–ª—ñ–º—ñ—Ç) / 0.5 (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
  - –ü–∞–º'—è—Ç—å: 1536MB (–ª—ñ–º—ñ—Ç) / 512MB (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)

#### –°–µ—Ä–≤—ñ—Å MongoDB

- **WiredTiger –ö–µ—à**: 1GB
- **–û–±–º–µ–∂–µ–Ω–Ω—è –†–µ—Å—É—Ä—Å—ñ–≤**:
  - CPU: 2.0 (–ª—ñ–º—ñ—Ç) / 0.5 (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
  - –ü–∞–º'—è—Ç—å: 1536MB (–ª—ñ–º—ñ—Ç) / 512MB (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)

#### –°–µ—Ä–≤—ñ—Å Redis

- **–ú–∞–∫—Å. –ü–∞–º'—è—Ç—å**: 400MB (–ø–æ–¥–≤–æ—î–Ω–æ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –∫–µ—à—É–≤–∞–Ω–Ω—è)
- **–ü–æ–ª—ñ—Ç–∏–∫–∞ –í–∏—Ç—ñ—Å–Ω–µ–Ω–Ω—è**: allkeys-lru
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å**: AOF —É–≤—ñ–º–∫–Ω–µ–Ω–æ (appendfsync everysec)
- **–û–±–º–µ–∂–µ–Ω–Ω—è –†–µ—Å—É—Ä—Å—ñ–≤**:
  - CPU: 1.0 (–ª—ñ–º—ñ—Ç) / 0.25 (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)
  - –ü–∞–º'—è—Ç—å: 512MB (–ª—ñ–º—ñ—Ç) / 128MB (—Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è)

### `nginx/default.prod.conf`

–ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Nginx –∑:

#### –ë–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Upstream

```nginx
upstream app_backend {
    least_conn;  # –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–π–º–µ–Ω—à–µ –∑'—î–¥–Ω–∞–Ω—å
    server app:3000 max_fails=3 fail_timeout=30s;
    
    # –ü—É–ª—ñ–Ω–≥ –∑'—î–¥–Ω–∞–Ω—å –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
    keepalive 64;             # –ü—É–ª –∑ 64 –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö –∑'—î–¥–Ω–∞–Ω—å (16 –Ω–∞ —ñ–Ω—Å—Ç–∞–Ω—Å)
    keepalive_requests 1000;  # –ú–∞–∫—Å. –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è
    keepalive_timeout 60s;    # –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è 60—Å
}
```

#### –§—É–Ω–∫—Ü—ñ—ó –ë–µ–∑–ø–µ–∫–∏

- **–¢—ñ–ª—å–∫–∏ TLS 1.2 —ñ 1.3**
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–ø–µ–∫–∏**: X-Frame-Options, X-Content-Type-Options, —Ç–æ—â–æ.
- **–ö–µ—à—É–≤–∞–Ω–Ω—è SSL —Å–µ—Å—ñ–π** –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- **–¢–∞–π–º–∞—É—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤**: 60—Å connect/send/read
- **–ë–∞–∑–æ–≤–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** –¥–ª—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è HTTP –Ω–∞ HTTPS** (–æ–∫—Ä—ñ–º –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É –∑–¥–æ—Ä–æ–≤'—è)

#### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

- **HTTP/2** —É–≤—ñ–º–∫–Ω–µ–Ω–æ
- **Keepalive –∑'—î–¥–Ω–∞–Ω–Ω—è** –¥–æ –±–µ–∫–µ–Ω–¥—É (–ø—É–ª –∑ 64 –∑'—î–¥–Ω–∞–Ω—å)
- **–ü—Ä–æ–∫—Å—ñ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è** –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ (16x8KB –±—É—Ñ–µ—Ä—ñ–≤)
- **–ö–µ—à—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤** (1 –≥–æ–¥–∏–Ω–∞)
- **–ï–Ω–¥–ø–æ—ñ–Ω—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤'—è** –Ω–∞ HTTP (–±–µ–∑ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è, –±–µ–∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è)

## üéÆ –ö–æ–º–∞–Ω–¥–∏ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

–í—Å—ñ –∫–æ–º–∞–Ω–¥–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ `Makefile`:

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ü—Ä–æ–¥–∞–∫—à–Ω –°—Ç–µ–∫–æ–º

```bash
# –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏/–ø–µ—Ä–µ—Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω (–∑–±—ñ—Ä–∫–∞ + —Å—Ç–∞—Ä—Ç –∑ 4 —Ä–µ–ø–ª—ñ–∫–∞–º–∏)
make prod-deploy

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ç–µ–∫
make prod-up              # –†–µ–ø–ª—ñ–∫–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (4)
make prod-up1             # –û–¥–∏–Ω —ñ–Ω—Å—Ç–∞–Ω—Å
make prod-up4             # 4 —ñ–Ω—Å—Ç–∞–Ω—Å–∏

# –ó—É–ø–∏–Ω–∏—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ç–µ–∫
make prod-down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤—ñ—Å–∏
make prod-restart
```

### –ö–æ–º–∞–Ω–¥–∏ –ó–±—ñ—Ä–∫–∏

```bash
# –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –æ–±—Ä–∞–∑–∏
make prod-build

# –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –±–µ–∑ –∫–µ—à—É
make prod-rebuild
```

### –ö–æ–º–∞–Ω–¥–∏ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏
make prod-ps

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤'—è
make prod-health

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
make prod-logs            # –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
make prod-logs-app        # –¢—ñ–ª—å–∫–∏ –¥–æ–¥–∞—Ç–æ–∫
make prod-logs-nginx      # –¢—ñ–ª—å–∫–∏ nginx

# –ü–æ–∫–∞–∑–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ dev —ñ prod
make status
```

### –î–æ—Å—Ç—É–ø –¥–æ Shell

```bash
# Shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ –¥–æ–¥–∞—Ç–∫—É
make prod-shell

# Shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ nginx
make prod-shell SERVICE=nginx
```

### –ö–æ–º–∞–Ω–¥–∏ –û—á–∏—â–µ–Ω–Ω—è

```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —Ç–∞ —Ç–æ–º–∏
make prod-clean

# –ì–ª–æ–±–∞–ª—å–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è Docker (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±–µ—Ä–µ–∂–Ω–æ)
make prune
```

## üìà –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

### –†—É—á–Ω–µ –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

–ú–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ –¥–æ N —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤:

```bash
# –ú–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ –¥–æ 8 —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
make prod-scale APP_REPLICAS=8

# –ú–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏ –¥–æ 2 —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
make prod-scale APP_REPLICAS=2

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∫–æ–º–∞–Ω–¥–∏
make prod-up1    # 1 —ñ–Ω—Å—Ç–∞–Ω—Å
make prod-up4    # 4 —ñ–Ω—Å—Ç–∞–Ω—Å–∏
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω—å —Ä–æ–∑–≥–ª—è–Ω—å—Ç–µ:

- **Docker Swarm** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—ó
- **Kubernetes** –¥–ª—è –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è
- **AWS ECS/EKS** –∞–±–æ **GCP GKE** –¥–ª—è —Ö–º–∞—Ä–Ω–∏—Ö —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω—å

### –ú—ñ—Ä–∫—É–≤–∞–Ω–Ω—è —â–æ–¥–æ –†–µ—Å—É—Ä—Å—ñ–≤

–ü–æ—Ç–æ—á–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª —Ä–µ—Å—É—Ä—Å—ñ–≤ –Ω–∞ —Ä–µ–ø–ª—ñ–∫—É:

- **–î–æ–¥–∞—Ç–æ–∫**: 0.5-1.5 CPU, 256-768MB RAM
- **–í—Å—å–æ–≥–æ –¥–ª—è 4 —Ä–µ–ø–ª—ñ–∫**: 2-6 CPUs, 1-3GB RAM
- **Nginx**: 0.25-1.0 CPU, 64-256MB RAM
- **PostgreSQL**: 0.5-2.0 CPU, 512MB-1.5GB RAM
- **MongoDB**: 0.5-2.0 CPU, 512MB-1.5GB RAM
- **Redis**: 0.25-1.0 CPU, 128-512MB RAM

**–ó–∞–≥–∞–ª—å–Ω—ñ –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –†–µ—Å—É—Ä—Å–∏**: 5.5-12 CPUs, 4-8GB RAM

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è 4 —Ä–µ–ø–ª—ñ–∫:

- **CPU**: 8+ —è–¥–µ—Ä (12+ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ)
- **RAM**: 8GB+ (16GB —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- **–î–∏—Å–∫**: 50GB+ SSD (NVMe –ø–µ—Ä–µ–≤–∞–∂–Ω–æ)

## üè• –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —ñ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤'—è

### –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤'—è

#### –ó–¥–æ—Ä–æ–≤'—è –î–æ–¥–∞—Ç–∫—É

```bash
# –ß–µ—Ä–µ–∑ nginx (–∑–æ–≤–Ω—ñ—à–Ω—ñ–π –¥–æ—Å—Ç—É–ø - HTTP, –±–µ–∑ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è)
curl http://localhost/api/health
# –í—ñ–¥–ø–æ–≤—ñ–¥—å: {"status":"OK"}

# –ß–µ—Ä–µ–∑ nginx (HTTPS)
curl -k https://localhost/api/health
# –í—ñ–¥–ø–æ–≤—ñ–¥—å: {"status":"OK"}

# –ë–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π)
docker exec csa_2025-app-1 curl -f http://localhost:3000/health
# –í—ñ–¥–ø–æ–≤—ñ–¥—å: {"status":"OK"}
```

#### –ó–¥–æ—Ä–æ–≤'—è –û–∫—Ä–µ–º–∏—Ö –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤'—è
docker compose -f docker-compose.prod.yml ps

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤'—è
docker inspect csa_2025-app-1 | jq '.[0].State.Health'
```

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ü–µ—Ä–µ–≤—ñ—Ä–æ–∫ –ó–¥–æ—Ä–æ–≤'—è

–í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ –º–∞—é—Ç—å –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤'—è:

- **–Ü–Ω—Å—Ç–∞–Ω—Å–∏ –î–æ–¥–∞—Ç–∫—É**:
  - –ï–Ω–¥–ø–æ—ñ–Ω—Ç: `/health` (–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π)
  - –Ü–Ω—Ç–µ—Ä–≤–∞–ª: 30—Å
  - –¢–∞–π–º–∞—É—Ç: 10—Å
  - –ü–µ—Ä—ñ–æ–¥ —Å—Ç–∞—Ä—Ç—É: 40—Å
  - –ü–æ–≤—Ç–æ—Ä–∏: 3

- **Nginx**:
  - –ï–Ω–¥–ø–æ—ñ–Ω—Ç: `http://127.0.0.1:80/api/health`
  - –Ü–Ω—Ç–µ—Ä–≤–∞–ª: 30—Å
  - –¢–∞–π–º–∞—É—Ç: 10—Å
  - –ü–µ—Ä—ñ–æ–¥ —Å—Ç–∞—Ä—Ç—É: 10—Å
  - –ü–æ–≤—Ç–æ—Ä–∏: 3
  - –ü—Ä–∏–º—ñ—Ç–∫–∞: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î HTTP (–±–µ–∑ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è)

- **PostgreSQL**:
  - –ö–æ–º–∞–Ω–¥–∞: `pg_isready`
  - –Ü–Ω—Ç–µ—Ä–≤–∞–ª: 10—Å
  - –¢–∞–π–º–∞—É—Ç: 5—Å
  - –ü–µ—Ä—ñ–æ–¥ —Å—Ç–∞—Ä—Ç—É: 30—Å
  - –ü–æ–≤—Ç–æ—Ä–∏: 5

- **Redis**:
  - –ö–æ–º–∞–Ω–¥–∞: `redis-cli ping`
  - –Ü–Ω—Ç–µ—Ä–≤–∞–ª: 10—Å
  - –¢–∞–π–º–∞—É—Ç: 3—Å
  - –ü–µ—Ä—ñ–æ–¥ —Å—Ç–∞—Ä—Ç—É: 10—Å
  - –ü–æ–≤—Ç–æ—Ä–∏: 5

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –õ–æ–≥—ñ–≤

```bash
# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
make prod-logs

# –§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –∑–∞ —Å–µ—Ä–≤—ñ—Å–æ–º
make prod-logs-app
make prod-logs-nginx

# –°–ª—ñ–¥–∫—É–≤–∞—Ç–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
docker compose -f docker-compose.prod.yml logs -f app-1

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 100 —Ä—è–¥–∫—ñ–≤
docker compose -f docker-compose.prod.yml logs --tail=100
```

## üîß –£—Å—É–Ω–µ–Ω–Ω—è –ù–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –ü–æ—à–∏—Ä–µ–Ω—ñ –ü—Ä–æ–±–ª–µ–º–∏

#### 1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ù–µ–≥–∞–π–Ω–æ –ó–∞–≤–µ—Ä—à—É—é—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º–∏**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–æ–¥–∞—Ç–∫—É –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è, –∞ –ø–æ—Ç—ñ–º –Ω–µ–≥–∞–π–Ω–æ –∑–∞–≤–µ—Ä—à—É—é—Ç—å—Å—è

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
make prod-logs-app

# –ê–±–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ñ–Ω—Å—Ç–∞–Ω—Å—É
docker logs csa_2025-app-1
```

**–ü–æ—à–∏—Ä–µ–Ω—ñ –ü—Ä–∏—á–∏–Ω–∏**:

- –í—ñ–¥—Å—É—Ç–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤ `package.json`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `NODE_ENV`
- –ó–±–æ—ó –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- –í—ñ–¥—Å—É—Ç–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

**–†—ñ—à–µ–Ω–Ω—è**:

```bash
# –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –±–µ–∑ –∫–µ—à—É
make prod-rebuild

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
docker compose -f docker-compose.prod.yml config
```

#### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ó–¥–æ—Ä–æ–≤'—è –ù–µ –ü—Ä–æ—Ö–æ–¥—è—Ç—å

**–°–∏–º–ø—Ç–æ–º–∏**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø–æ–∫–∞–∑—É—é—Ç—å —è–∫ "–Ω–µ–∑–¥–æ—Ä–æ–≤—ñ"

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤'—è
make prod-health

# –Ü–Ω—Å–ø–µ–∫—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–¥–æ—Ä–æ–≤'—è
docker inspect csa_2025-app-1 --format='{{json .State.Health}}'
```

**–†—ñ—à–µ–Ω–Ω—è**:

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/health` –ø—Ä–∞—Ü—é—î –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –¥–æ–¥–∞—Ç–∫—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤'—è nginx –¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑ HTTP
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ curl/wget –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂–µ–≤–µ –∑'—î–¥–Ω–∞–Ω–Ω—è –º—ñ–∂ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- –î–ª—è nginx: –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î HTTP, –∞ –Ω–µ HTTPS (—â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è)

#### 3. –ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ù–µ –ü—Ä–∞—Ü—é—î

**–°–∏–º–ø—Ç–æ–º–∏**: –ó–∞–ø–∏—Ç–∏ –π–¥—É—Ç—å —Ç—ñ–ª—å–∫–∏ –Ω–∞ –æ–¥–∏–Ω —ñ–Ω—Å—Ç–∞–Ω—Å

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é nginx
docker exec csa_2025-nginx-1 nginx -t

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ nginx
make prod-logs-nginx
```

**–†—ñ—à–µ–Ω–Ω—è**:

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é upstream –≤ `nginx/default.prod.conf`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ —ñ–Ω—Å—Ç–∞–Ω—Å–∏ –¥–æ–¥–∞—Ç–∫—É –∑–¥–æ—Ä–æ–≤—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ DNS —Ä–µ–∑–æ–ª—é—Ü—ñ—é –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É `app`

#### 4. –ü–æ–º–∏–ª–∫–∏ –ó'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–∞–∑–æ—é –î–∞–Ω–∏—Ö

**–°–∏–º–ø—Ç–æ–º–∏**: –î–æ–¥–∞—Ç–æ–∫ –Ω–µ –º–æ–∂–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –±–∞–∑ –¥–∞–Ω–∏—Ö

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–¥–æ—Ä–æ–≤'—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
docker compose -f docker-compose.prod.yml ps postgres mongo redis

# –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ–¥–∞—Ç–∫—É
docker exec csa_2025-app-1 nc -zv postgres 5432
docker exec csa_2025-app-1 nc -zv mongo 27017
docker exec csa_2025-app-1 nc -zv redis 6379
```

**–†—ñ—à–µ–Ω–Ω—è**:

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Å–µ—Ä–≤—ñ—Å–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑–¥–æ—Ä–æ–≤—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –¥–ª—è —Ä—è–¥–∫—ñ–≤ –∑'—î–¥–Ω–∞–Ω–Ω—è
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–æ–¥–∞—Ç–∫—É –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –º–µ—Ä–µ–∂–∞—Ö

#### 5. –ü—Ä–æ–±–ª–µ–º–∏ SSL –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞

**–°–∏–º–ø—Ç–æ–º–∏**: HTTPS –ø–æ–º–∏–ª–∫–∏ –∞–±–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç
openssl x509 -in nginx/secrets/certs/server.crt -text -noout

# –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ SSL –∑'—î–¥–Ω–∞–Ω–Ω—è
openssl s_client -connect localhost:443
```

**–†—ñ—à–µ–Ω–Ω—è**:

- –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏, —è–∫—â–æ —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ nginx –º–∞—î –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–∞–π–ª—ñ–≤ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤

### –†–µ–∂–∏–º –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –æ–¥–∏–Ω —ñ–Ω—Å—Ç–∞–Ω—Å –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è:

```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ç–µ–∫
make prod-down

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –æ–¥–∏–Ω —ñ–Ω—Å—Ç–∞–Ω—Å –∑ –ª–æ–≥–∞–º–∏
docker compose -f docker-compose.prod.yml up app

# –ê–±–æ –∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ shell
docker compose -f docker-compose.prod.yml run --rm app sh
```

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
docker stats

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stats csa_2025-app-1

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (PostgreSQL)
docker exec csa_2025-app-1 sh -c 'echo "SELECT count(*) FROM pg_stat_activity;" | psql $PG_DATABASE_URL'

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ Redis
docker exec csa_2025-redis-1 redis-cli INFO memory

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞—Ç—É—Å nginx upstream
docker exec csa_2025-nginx-1 cat /etc/nginx/conf.d/default.conf | grep -A 5 "upstream"
```

**–ü–æ—Ä–∞–¥–∏ –∑ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**:

1. **–ü—É–ª –ó'—î–¥–Ω–∞–Ω—å –∑ –ë–∞–∑–æ—é –î–∞–Ω–∏—Ö**: –í–∂–µ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–æ 20 –∑'—î–¥–Ω–∞–Ω—å –Ω–∞ —ñ–Ω—Å—Ç–∞–Ω—Å –¥–æ–¥–∞—Ç–∫—É (80 –≤—Å—å–æ–≥–æ)
2. **Nginx Keepalive**: –ü—É–ª –∑ 64 –∑'—î–¥–Ω–∞–Ω—å –∑–º–µ–Ω—à—É—î –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è
3. **–û–±–º–µ–∂–µ–Ω–Ω—è –†–µ—Å—É—Ä—Å—ñ–≤**: –ó–±—ñ–ª—å—à–µ–Ω—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
   - –î–æ–¥–∞—Ç–æ–∫: 1.5 CPU, 768MB RAM
   - –ë–∞–∑–∏ –¥–∞–Ω–∏—Ö: 2.0 CPU, 1.5GB RAM
   - Redis: 400MB –∫–µ—à
4. **–î–ª—è –í–∏—â–æ–≥–æ –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**: –ú–∞—Å—à—Ç–∞–±—É–π—Ç–µ –¥–æ –±—ñ–ª—å—à–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤ –¥–æ–¥–∞—Ç–∫—É
   ```bash
   make prod-scale APP_REPLICAS=8
   ```

## üîí –ú—ñ—Ä–∫—É–≤–∞–Ω–Ω—è –ë–µ–∑–ø–µ–∫–∏

### –ü—Ä–æ–¥–∞–∫—à–Ω –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π –°–ø–∏—Å–æ–∫

- [ ] **SSL/TLS –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥—ñ–π—Å–Ω—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ (–Ω–µ —Å–∞–º–æ–ø—ñ–¥–ø–∏—Å–∞–Ω—ñ)
- [ ] **–ù–∞–¥—ñ–π–Ω—ñ –ü–∞—Ä–æ–ª—ñ**: –ü–∞—Ä–æ–ª—ñ –±–∞–∑ –¥–∞–Ω–∏—Ö, .htpasswd
- [ ] **–ó–º—ñ–Ω–Ω—ñ –°–µ—Ä–µ–¥–æ–≤–∏—â–∞**: –ù—ñ–∫–æ–ª–∏ –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ `.env` —É —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—é –≤–µ—Ä—Å—ñ–π
- [ ] **–Ü–∑–æ–ª—è—Ü—ñ—è –ú–µ—Ä–µ–∂—ñ**: app_subnet —î –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—é (–±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –¥–æ—Å—Ç—É–ø—É)
- [ ] **–ù–µ–ø—Ä–∏–≤—ñ–ª–µ–π–æ–≤–∞–Ω–∏–π –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á**: –í—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–æ–¥–∞—Ç–∫—É –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è —è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á `node`
- [ ] **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –ë–µ–∑–ø–µ–∫–∏**: –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ X-Frame-Options, CSP, —Ç–æ—â–æ.
- [ ] **–û–±–º–µ–∂–µ–Ω–Ω—è –®–≤–∏–¥–∫–æ—Å—Ç—ñ**: –†–æ–∑–≥–ª—è–Ω—å—Ç–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ nginx
- [ ] **–ü—Ä–∞–≤–∏–ª–∞ –§–∞–π—Ä–≤–æ–ª—É**: –í—ñ–¥–∫—Ä–∏–≤–∞–π—Ç–µ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ä—Ç–∏ 80 —ñ 443
- [ ] **–†–µ–≥—É–ª—è—Ä–Ω—ñ –û–Ω–æ–≤–ª–µ–Ω–Ω—è**: –ü—ñ–¥—Ç—Ä–∏–º—É–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –±–∞–∑–æ–≤—ñ –æ–±—Ä–∞–∑–∏ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É —Å—Ç–∞–Ω—ñ
- [ ] **–õ–æ–≥—É–≤–∞–Ω–Ω—è**: –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ª–æ–≥–∏ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –±–µ–∑–ø–µ–∫–∏
- [ ] **–°—Ç—Ä–∞—Ç–µ–≥—ñ—è –†–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è**: –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ —Ä–µ–≥—É–ª—è—Ä–Ω—ñ —Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–ø—ñ—ó –±–∞–∑ –¥–∞–Ω–∏—Ö

### –ù–∞–π–∫—Ä–∞—â—ñ –ü—Ä–∞–∫—Ç–∏–∫–∏ –ë–µ–∑–ø–µ–∫–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –†–æ—Ç—É–π—Ç–µ –°–µ–∫—Ä–µ—Ç–∏**

   ```bash
   # –û–Ω–æ–≤—ñ—Ç—å –ø–∞—Ä–æ–ª—ñ –±–∞–∑ –¥–∞–Ω–∏—Ö
   # –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–π—Ç–µ .htpasswd
   # –ü–æ–Ω–æ–≤—ñ—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
   ```

2. **–û–±–º–µ–∂—Ç–µ –í—ñ–¥–∫—Ä–∏—Ç—ñ—Å—Ç—å –ú–µ—Ä–µ–∂—ñ**

   ```yaml
   # –í docker-compose.prod.yml
   networks:
     app_subnet:
       internal: true # –ó–∞–ø–æ–±—ñ–≥–∞—î –∑–æ–≤–Ω—ñ—à–Ω—å–æ–º—É –¥–æ—Å—Ç—É–ø—É
   ```

3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –°–µ–∫—Ä–µ—Ç–∞–º–∏**
   - –†–æ–∑–≥–ª—è–Ω—å—Ç–µ Docker Secrets (—Ä–µ–∂–∏–º Swarm)
   - –ê–±–æ –∑–æ–≤–Ω—ñ—à–Ω—î —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (Vault, AWS Secrets Manager)

4. **–ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ –ë–µ–∑–ø–µ–∫—É**
   - –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø—É nginx
   - –ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ –Ω–µ–≤–¥–∞–ª—ñ —Å–ø—Ä–æ–±–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
   - –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –∞–Ω–æ–º–∞–ª—ñ—ó

5. **–ü—ñ–¥—Ç—Ä–∏–º—É–π—Ç–µ –û–±—Ä–∞–∑–∏ –≤ –ê–∫—Ç—É–∞–ª—å–Ω–æ–º—É –°—Ç–∞–Ω—ñ**

   ```bash
   # –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –æ—Å—Ç–∞–Ω–Ω—ñ –±–∞–∑–æ–≤—ñ –æ–±—Ä–∞–∑–∏
   docker pull node:22.21.0-slim
   docker pull nginx:stable-alpine
   docker pull postgres:latest

   # –ü–µ—Ä–µ–±—É–¥—É–π—Ç–µ
   make prod-rebuild
   ```

## üìù –î–æ–¥–∞—Ç–∫–æ–≤—ñ –†–µ—Å—É—Ä—Å–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Docker Compose](https://docs.docker.com/compose/)
- [–ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Nginx](https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/)
- [–ù–∞–π–∫—Ä–∞—â—ñ –ü—Ä–∞–∫—Ç–∏–∫–∏ Node.js —É –ü—Ä–æ–¥–∞–∫—à–Ω](https://nodejs.org/en/docs/guides/nodejs-docker-webapp/)
- [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ PostgreSQL](https://wiki.postgresql.org/wiki/Performance_Optimization)

## üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø—Ä–æ–±–ª–µ–º –∞–±–æ –ø–∏—Ç–∞–Ω—å:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–∑–¥—ñ–ª [–£—Å—É–Ω–µ–Ω–Ω—è –ù–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π](#—É—Å—É–Ω–µ–Ω–Ω—è-–Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)
2. –ü–µ—Ä–µ–≥–ª—è–Ω–µ—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤: `make prod-logs`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ GitHub Issues
